<%# CSS・・・assets/stylesheets/facilities/show.css %>
<%= render "shared/header" %>
<% breadcrumb :show_facility, @facility %>
<%= breadcrumbs separator: " &#x27A4; ", class: "logo" %>

<script type="text/javascript">
  function initMap() {
    const coordinate = {lat: <%= @facility.latitude %>, lng: <%= @facility.longitude %>};
    const map = new google.maps.Map(document.getElementById('map'), {
      center: coordinate,
      zoom: 15
    });
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= @google_key %>&callback=initMap" async defer></script>
<div class="show-main">
  <% if @facility.category.name == "動物園" %>
    <div class="show-facility-list-zoo">
      <%= image_tag "zoo-icon.png" %>
      <h1 class="show-facility-name">
        <%= @facility.name %>
      </h1>
    </div>
    <div class="first-show">
      <h2 class="show-content-zoo">
        スポット名称
      </h2>
      <p class="show-contents-kana">
        <%= @facility.kananame %>
      </p>
      <p class="show-contents-name">
        <%= @facility.name %>
      </p>
      <h2 class="show-content-zoo">
        所在地
      </h2>
      <p class="show-contents-name">
        <%= @facility.address %>
      </p>
      <div id="map" style="width:100%; height:360px; margin-top:1.5%">
      </div>
    </div>
  <% else %>
    <div class="show-facility-list-aquarium">
      <%= image_tag "aquarium-icon.png" %>
      <h1 class="show-facility-name">
        <%= @facility.name %>
      </h1>
    </div>
    <div class="first-show">
      <h2 class="show-content-aquarium">
        スポット名称
      </h2>
      <p class="show-contents-kana">
        <%= @facility.kananame %>
      </p>
      <p class="show-contents-name">
        <%= @facility.name %>
      </p>
      <h2 class="show-content-aquarium">
        所在地
      </h2>
      <p class="show-contents-name">
        <%= @facility.address %>
      </p>
      <div id="map" style="width:100%; height:360px; margin-top:1.5%">
      </div>
    </div>
  <% end %>
  <div class="upper-content">
    <%= link_to "公式サイトへ (外部リンク)", @facility.official_website, target: :blank, class: "official-btn" %>
  </div>

  <div class="show-comment-ber">
    <h1 class="show-comment-top">
      <%= @facility.name %> レビュー  <%= @comments.length %>件
    </h1>
    <ul class="show-comment-list">
      <%= render partial: "comment", collection: @comments %>
    </ul>
    <% if @comments.length == 0 %>
      <p class="show-comment-picture-nil-text">
        投稿されたレビューがありません。
      </p>
      <p class="show-comment-picture-nil-text">
        新しい投稿をお待ちしております。
      </p>
    <% end %>
  </div>

  <div class="show-picture-ber">
    <h1 class="show-picture-top">
      <%= @facility.name %> ベストショット <%= @pictures.length %>件
    </h1>
    <ul class="show-picture-list">
      <%= render partial: "picture", collection: @pictures %>
    </ul>
    <% if @pictures.length == 0 %>
      <p class="show-comment-picture-nil-text">
        投稿されたベストショットがありません。
      </p>
      <p class="show-comment-picture-nil-text">
        新しい投稿をお待ちしております。
      </p>
    <% end %>
  </div>

  <div class="show-btn-set">
    <%= link_to(new_facility_comment_path(@facility), class: "comment-btn") do %>
      <span class="comment-btn-text">レビュー</span>
      <span class="comment-btn-text">投稿</span>
      <%= image_tag "review-icon.png" , size: "185x50" ,class: "comment-btn-icon" %>
    <% end %>
    <%= link_to(new_facility_picture_path(@facility), class: "picture-btn") do %>
      <span class="picture-btn-text">ベストショット</span>
      <span class="picture-btn-text">投稿</span>
      <%= image_tag "picture-icon.png" , size: "185x50" ,class: "picture-btn-icon" %>
    <% end %>
  </div>
</div>
<%= render "shared/footer" %>
